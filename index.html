<!DOCTYPE html>
<html lang="'en">
<html>
    <head>
        <meta charset="utf-8">
        <title> Rock Paper Scissors</title>
    </head>
    <body>
        <script>
        const computerSelection = getComputerChoice();
        function getComputerChoice() {  <!-- return computer choice -->
        let random = Math.random(); //fixing the bugs that computer choice favors scissors
        if (random <= 0.3333) {
        return "paper";
        } else if (random >= 0.6666) {
        return "rock";
        } else {
        return "scissors";
            }
        }

        function playRound(playerSelection, computerSelection) {
        if (playerSelection.toLowerCase() === "rock") { <!-- If the player choice is rock -->
            if (computerSelection === "paper") {
            computerScore++;
            return lose;
            } else if (computerSelection === "rock") {
            return tie;
            } else {
            userScore++;
            return win;
            }
        }

        if (playerSelection.toLowerCase() === "scissors") {<!-- If the player choice is scissors -->
            if (computerSelection === "paper") {
            userScore++;
            return win;
            } else if (computerSelection === "rock") {
            computerScore++;
            return lose;
            } else {
            return tie;
            }
        }

        if (playerSelection.toLowerCase() === "paper") {
            if (computerSelection === "paper") {
            return tie;
            } else if (computerSelection === "rock") {
            userScore++;
            return win;
            } else {
            computerScore++;
            return lose;
            }
        }
        }
        
        let userScore= parseInt(0); 
        let computerScore = parseInt(0);
        let win = "You win this round"
        let lose = "You lose this round"
        let tie = "It is a tie"
        
        for (let i = 1; i<=5; i++){
        let playerSelection = prompt("Pick your choice rock, paper, or scissor");
        const computerSelection = getComputerChoice()
        console.log(playRound(playerSelection, computerSelection))
        console.log("your score = " + userScore);
        console.log("Computer's score = " + computerScore);
        if (i == 3){ //fixing the bugs ending the game early
            if(userScore ==3 && computerScore ==0){
            alert("Game Over=> Your score "+userScore+" vs Computer "+computerScore+"");
            alert("You win");
            break;
            }
            else if(computerScore ==3 && userScore ==0){
            alert("Game Over=> Your score "+userScore+" vs Computer "+computerScore+"");
            alert("You lost");
            break;   
            }
        }
        else if(i ==4 ){
            if(userScore ==3 && computerScore ==1){
            alert("Game Over=> Your score "+userScore+" vs Computer "+computerScore+"");
            alert("You win");
            break;
            }
            else if(computerScore ==3 && userScore ==1){
            alert("Game Over=> Your score "+userScore+" vs Computer "+computerScore+"");
            alert("You lost");
            break; 
            }
        }
        else if(i == 5){
        if(userScore > computerScore){
            alert("Game Over=> Your score "+userScore+" vs Computer "+computerScore+"");
            alert("You win");
        }
        else if(computerScore < userScore){
            alert("Game Over=> Your score "+userScore+" vs Computer "+computerScore+"");
            alert("You lost");
        }
        else{
            alert("Game Over=> Your score "+userScore+" vs Computer "+computerScore+"");
            alert("There is no winner as the score was even");
        } //finish the bug
        }
        }
        </script>
    </body>
</html>